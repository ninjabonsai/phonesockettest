!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){angular.module("canvasSocketTest",[]),a("./controllers/main-controller"),a("./directives/orbiter-directive")},{"./controllers/main-controller":2,"./directives/orbiter-directive":3}],2:[function(){angular.module("canvasSocketTest").controller("mainCtrl",["$scope","$log",function(a,b){b.log("mainCtrl")}])},{}],3:[function(){angular.module("canvasSocketTest").directive("orbiter",["$log",function(a){return{link:function(b,c){function d(){t=[],r=document.createElement("canvas"),c[0].appendChild(r),r.width=z,r.height=A,o?(r.addEventListener("touchstart",e),r.addEventListener("touchend",e),r.addEventListener("gesturechange",e),r.addEventListener("gestureend",e)):(r.addEventListener("mousewheel",f),r.addEventListener("click",f)),s=r.getContext("2d"),l(r,s),v=t.length}function e(a){switch(a.type){case"gesturechange":x=a.scale+y*a.scale,h(),w=!0;break;case"gestureend":y=x-1;break;case"touchstart":a.preventDefault(),w=!1;break;case"touchend":if(!w){var b=(a.changedTouches[0].pageX-z/2)/x,c=(a.changedTouches[0].pageY-A/2)/x;g(b,c)}}}function f(a){if(a.preventDefault(),"mousewheel"==a.type)return x+=a.wheelDelta/1e3,void h();var b=(a.pageX-z/2)/x,c=(a.pageY-A/2)/x;g(b,c)}function g(a,b){n&&p.emit("applyThrust",{xPos:a,yPos:b,pId:n.pId})}function h(){x=Math.max(.1,x),x=Math.min(5,x)}function i(){z=window.innerWidth,A=window.innerHeight,B=z/2,C=A/2,r.width=z,r.height=A,l(r,s)}function j(){s.fillStyle="rgba(0, 0, 0, .05)",s.rect(0,0,r.width,r.height),s.fill(),s.fillStyle="rgba(0, 0, 0, 1)",s.beginPath(),s.arc(B+u.x*x,C+u.y*x,u.r*x+1,0,2*Math.PI,!0),s.closePath(),s.fill();for(var a=0;v-1>a;a++)for(var b=t[a],c=a+1;v>c;c++){var d=t[c];m(b,d)}for(a=0;v>a;a++){var e=t[a];e!=u&&(e.x+=e.vx,e.y+=e.vy),k(e)}}function k(a){var b=B+a.x*x,c=C+a.y*x;if(!(b>z||0>b||c>A||0>c)){var d=a.color[0],e=a.color[1],f=a.color[2];n&&a.pId==n.pId&&(d=255,e=255,f=255),s.fillStyle="rgba("+d+", "+e+", "+f+", 1)",s.beginPath(),s.arc(b,c,a.r*x,0,2*Math.PI,!0),s.closePath(),s.fill()}}function l(a,b){var c=window.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,e=c/d,f=a.width,g=a.height;a.width=f*e,a.height=g*e,a.style.width=f+"px",a.style.height=g+"px",b.scale(e,e)}function m(a,b){var c=b.x-a.x,d=b.y-a.y,e=c*c+d*d,f=Math.sqrt(e),g=a.mass*b.mass/e,h=g*c/f,i=g*d/f;f>a.r+b.r&&(a.vx+=h/a.mass,a.vy+=i/a.mass,b.vx-=h/b.mass,b.vy-=i/b.mass)}var n,o="ontouchstart"in document.documentElement,p=io.connect(),q=!1;p.on("createPlanets",function(b){a.log("createPlanets "+b),q||(q=!0,t=b.pa,v=t.length,u=t[0],n=b.pp,TweenMax.ticker.addEventListener("tick",j),window.addEventListener("resize",i))}),p.on("updatePlanets",function(b){if(t=b.pa,u=t[0],v=t.length,b.dpIds){var c=b.dpIds.length;if(n)for(var d=0;c>d;d++)if(b.dpIds[d]===n.pId){a.log("player destroyed!"),n=void 0;break}}});var r,s,t,u,v,w=!1,x=1,y=0,z=window.innerWidth,A=window.innerHeight,B=z/2,C=A/2;d()}}}])},{}]},{},[1,2,3]);